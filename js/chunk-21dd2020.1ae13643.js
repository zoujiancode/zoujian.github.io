(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-21dd2020"],{1276:function(t,e,s){"use strict";var i=s("d784"),a=s("44e7"),n=s("825a"),r=s("1d80"),o=s("4840"),c=s("8aa5"),l=s("50c4"),u=s("14c3"),d=s("9263"),f=s("d039"),h=[].push,p=Math.min,v=4294967295,g=!f((function(){return!RegExp(v,"y")}));i("split",2,(function(t,e,s){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,s){var i=String(r(this)),n=void 0===s?v:s>>>0;if(0===n)return[];if(void 0===t)return[i];if(!a(t))return e.call(i,t,n);var o,c,l,u=[],f=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),p=0,g=new RegExp(t.source,f+"g");while(o=d.call(g,i)){if(c=g.lastIndex,c>p&&(u.push(i.slice(p,o.index)),o.length>1&&o.index<i.length&&h.apply(u,o.slice(1)),l=o[0].length,p=c,u.length>=n))break;g.lastIndex===o.index&&g.lastIndex++}return p===i.length?!l&&g.test("")||u.push(""):u.push(i.slice(p)),u.length>n?u.slice(0,n):u}:"0".split(void 0,0).length?function(t,s){return void 0===t&&0===s?[]:e.call(this,t,s)}:e,[function(e,s){var a=r(this),n=void 0==e?void 0:e[t];return void 0!==n?n.call(e,a,s):i.call(String(a),e,s)},function(t,a){var r=s(i,t,this,a,i!==e);if(r.done)return r.value;var d=n(t),f=String(this),h=o(d,RegExp),m=d.unicode,b=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(g?"y":"g"),S=new h(g?d:"^(?:"+d.source+")",b),_=void 0===a?v:a>>>0;if(0===_)return[];if(0===f.length)return null===u(S,f)?[f]:[];var x=0,C=0,y=[];while(C<f.length){S.lastIndex=g?C:0;var I,k=u(S,g?f:f.slice(C));if(null===k||(I=p(l(S.lastIndex+(g?0:C)),f.length))===x)C=c(f,C,m);else{if(y.push(f.slice(x,C)),y.length===_)return y;for(var E=1;E<=k.length-1;E++)if(y.push(k[E]),y.length===_)return y;C=x=I}}return y.push(f.slice(x)),y}]}),!g)},"159b":function(t,e,s){var i=s("da84"),a=s("fdbc"),n=s("17c2"),r=s("9112");for(var o in a){var c=i[o],l=c&&c.prototype;if(l&&l.forEach!==n)try{r(l,"forEach",n)}catch(u){l.forEach=n}}},"17c2":function(t,e,s){"use strict";var i=s("b727").forEach,a=s("a640"),n=s("ae40"),r=a("forEach"),o=n("forEach");t.exports=r&&o?[].forEach:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}},"3f2b":function(t,e,s){t.exports=s.p+"img/pay.0f0c64c0.jpg"},4160:function(t,e,s){"use strict";var i=s("23e7"),a=s("17c2");i({target:"Array",proto:!0,forced:[].forEach!=a},{forEach:a})},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,s){var i=s("1d80"),a=s("5899"),n="["+a+"]",r=RegExp("^"+n+n+"*"),o=RegExp(n+n+"*$"),c=function(t){return function(e){var s=String(i(e));return 1&t&&(s=s.replace(r,"")),2&t&&(s=s.replace(o,"")),s}};t.exports={start:c(1),end:c(2),trim:c(3)}},"5e8d":function(t,e,s){t.exports=s.p+"img/weixin.f69528cb.jpg"},"76e0":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"pay"},[s("van-nav-bar",{attrs:{title:"确认订单","left-text":"返回","left-arrow":""},on:{"click-left":function(e){return t.$router.go(-1)}}}),s("div",{staticClass:"choose"},[s("div",{staticClass:"address"},[s("van-cell",{attrs:{"is-link":""},on:{click:t.showPopup}},[s("div",{staticClass:"div"},[s("span",{staticClass:"span1"},[t._v(t._s(t.useAddressInfo.address))])])]),s("van-popup",{staticClass:"content",attrs:{position:"bottom",round:""},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[s("van-address-list",{attrs:{list:t.addresslist,"default-tag-text":"默认"},on:{select:t.selectItem,add:t.onAdd},model:{value:t.aid,callback:function(e){t.aid=e},expression:"aid"}})],1)],1)]),s("div",{staticClass:"order clearfix"},[s("h3",[t._v(" 商品数量 "),s("span",{staticClass:"fr"},[t._v("共"+t._s(t.count)+"件")])]),t._l(t.orderData,(function(e,i){return s("div",{key:i,staticClass:"item clearfix"},[s("div",{staticClass:"img fl"},[s("img",{staticClass:"img_auto",attrs:{src:e.small_img,alt:""}})]),s("div",{staticClass:"text fl"},[s("div",{staticClass:"name"},[s("span",{staticStyle:{"margin-right":"15px"}},[t._v(t._s(e.name))]),s("br"),s("span",[t._v(t._s(e.rule))])]),s("div",{staticClass:"bottom"},[s("div",{staticClass:"price fl"},[t._v(" ￥"+t._s(e.price)+" "),s("span",{staticStyle:{margin:"0 15px"}},[t._v("x")]),t._v(" "+t._s(e.count)+" ")])])])])}))],2),s("div",{staticClass:"goods"},[s("h3",[t._v(" 商品价格 "),s("span",{staticClass:"fr span1"},[t._v("￥"+t._s(t.total/100)+".00")])]),s("h3",[t._v(" 支付方式 "),s("span",{staticClass:"fr span2"},[t._v("￥"+t._s(t.total/100)+".00")])])]),s("div",{staticClass:"pay-ways"},[s("van-radio-group",{model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[s("van-cell-group",[s("van-cell",{attrs:{title:"支付宝支付",clickable:"",icon:t.img.src1},on:{click:function(e){t.radio="1"}},scopedSlots:t._u([{key:"right-icon",fn:function(){return[s("van-radio",{attrs:{name:"1"}})]},proxy:!0}])}),s("van-cell",{attrs:{title:"微信支付",clickable:"",icon:t.img.src2},on:{click:function(e){t.radio="2"}},scopedSlots:t._u([{key:"right-icon",fn:function(){return[s("van-radio",{attrs:{name:"2"}})]},proxy:!0}])})],1)],1)],1),s("div",{staticClass:"time"},[s("van-cell",{attrs:{"is-link":""},on:{click:t.showPopupOn}},[s("div",{staticClass:"words"},[s("p",[t._v(" 预计送达时间 "),t.isable?s("span",{staticClass:"fr"},[t._v(t._s(t.estimateTime))]):t._e()])])])],1),s("van-submit-bar",{attrs:{price:t.total,"button-text":"提交订单"},on:{submit:t.onSubmit}})],1)},a=[],n=(s("4160"),s("b0c0"),s("a9e3"),s("ac1f"),s("1276"),s("159b"),{available:1,condition:"无使用门槛\n最多优惠15元",reason:"",value:1500,name:"优惠券名称",startAt:1489104e3,endAt:1514592e3,valueDesc:"15",unitDesc:"元"}),r={data:function(){return{sids:"",show:!1,on:!1,value:"",addresslist:[],useAddressInfo:{address:"请选择收货地址",phone:"",receiver:""},aid:"",orderData:"",total:0,count:0,radio:"1",currentTime:"24:00",time:{hour:0,minute:59},arriverTime:"",chosenCoupon:-1,coupons:[n],disabledCoupons:[n],showList:!1,img:{src1:s("3f2b"),src2:s("5e8d")},estimateTime:"",isable:!0}},created:function(){this.sids=this.$route.query.sids.split("-"),this.getAddress(),this.getOrderData(this.sids);var t=new Date,e=t.getHours(),s=t.getMinutes();this.time.hour=e,this.time.minute=s,this.time.minute=s+30;var i=s+30;i>60&&(i-=60,e+=1),this.estimateTime=e+":"+i},methods:{onAdd:function(){this.$router.push({name:"修改地址"})},onChange:function(t){this.showList=!1,this.chosenCoupon=t;var e=Number(this.total)-n.value;this.total=e},onExchange:function(){this.coupons.push(n)},showPopup:function(){this.show=!0},showPopupOn:function(){this.on=!0},close:function(){this.on=!this.on},confirm:function(t){this.arriverTime=t,this.on=!this.on,this.isable=!1},getAddress:function(){var t=this,e=localStorage.getItem("__jigng");this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"get",url:"/findAddress",params:{appkey:this.appkey,tokenString:e}}).then((function(e){t.$toast.clear(),2e4==e.data.code&&e.data.result.forEach((function(e){var s={id:e.aid,tel:e.tel,name:e.name,address:e.province+e.city+e.county+e.addressDetail,isDefault:Boolean(e.isDefault)};e.isDefault&&(t.aid=e.aid),t.addresslist.push(s)}))})).catch((function(e){t.$toast.clear()}))},selectItem:function(t){this.useAddressInfo.address=t.address,this.useAddressInfo.phone=t.tel,this.useAddressInfo.receiver=t.name,this.show=!this.show},getOrderData:function(t){var e=this;if("请选择收获地址"!=this.useAddressInfo.address){var s=localStorage.getItem("__jigng");this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"get",url:"/commitShopcart",params:{appkey:this.appkey,tokenString:s,sids:JSON.stringify(this.sids)}}).then((function(t){5e4==t.data.code&&(t.data.result.forEach((function(t){e.total+=t.price*t.count*100,e.count+=t.count})),e.orderData=t.data.result)})).catch((function(t){}))}},onSubmit:function(){var t=this,e=localStorage.getItem("__jigng");this.$toast.loading({message:"支付中...",forbidClick:!0,duration:0}),this.axios({method:"post",url:"/pay",data:{appkey:this.appkey,tokenString:e,sids:JSON.stringify(this.sids),phone:this.useAddressInfo.phone,address:this.useAddressInfo.address,receiver:this.useAddressInfo.receiver}}).then((function(e){6e4==e.data.code&&(t.$toast("免密支付成功"),t.$router.push({name:"订单"}))})).catch((function(t){}))}}},o=r,c=(s("8405"),s("2877")),l=Object(c["a"])(o,i,a,!1,null,"c9fcf908",null);e["default"]=l.exports},8405:function(t,e,s){"use strict";var i=s("aa08"),a=s.n(i);a.a},a640:function(t,e,s){"use strict";var i=s("d039");t.exports=function(t,e){var s=[][t];return!!s&&i((function(){s.call(null,e||function(){throw 1},1)}))}},a9e3:function(t,e,s){"use strict";var i=s("83ab"),a=s("da84"),n=s("94ca"),r=s("6eeb"),o=s("5135"),c=s("c6b6"),l=s("7156"),u=s("c04e"),d=s("d039"),f=s("7c73"),h=s("241c").f,p=s("06cf").f,v=s("9bf2").f,g=s("58a8").trim,m="Number",b=a[m],S=b.prototype,_=c(f(S))==m,x=function(t){var e,s,i,a,n,r,o,c,l=u(t,!1);if("string"==typeof l&&l.length>2)if(l=g(l),e=l.charCodeAt(0),43===e||45===e){if(s=l.charCodeAt(2),88===s||120===s)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:i=2,a=49;break;case 79:case 111:i=8,a=55;break;default:return+l}for(n=l.slice(2),r=n.length,o=0;o<r;o++)if(c=n.charCodeAt(o),c<48||c>a)return NaN;return parseInt(n,i)}return+l};if(n(m,!b(" 0o1")||!b("0b1")||b("+0x1"))){for(var C,y=function(t){var e=arguments.length<1?0:t,s=this;return s instanceof y&&(_?d((function(){S.valueOf.call(s)})):c(s)!=m)?l(new b(x(e)),s,y):x(e)},I=i?h(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),k=0;I.length>k;k++)o(b,C=I[k])&&!o(y,C)&&v(y,C,p(b,C));y.prototype=S,S.constructor=y,r(a,m,y)}},aa08:function(t,e,s){},b0c0:function(t,e,s){var i=s("83ab"),a=s("9bf2").f,n=Function.prototype,r=n.toString,o=/^\s*function ([^ (]*)/,c="name";i&&!(c in n)&&a(n,c,{configurable:!0,get:function(){try{return r.call(this).match(o)[1]}catch(t){return""}}})},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-21dd2020.1ae13643.js.map