{"version":3,"sources":["webpack:///./src/views/safe.vue?18e2","webpack:///src/views/safe.vue","webpack:///./src/views/safe.vue?8624","webpack:///./src/views/safe.vue","webpack:///./src/views/safe.vue?0849","webpack:///./node_modules/@babel/runtime/helpers/esm/defineProperty.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","on","$event","$router","go","staticClass","changePasswords","destroy","logout","_v","model","value","callback","$$v","show","expression","oldPassword","newPassword","commit","destroys","staticRenderFns","message","forbidClick","duration","axios","tokenString","password","localStorage","removeItem","push","component","_defineProperty","obj","key","Object","defineProperty","enumerable","configurable","writable"],"mappings":"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","file":"js/chunk-682eade8.5aee2ebe.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('van-nav-bar',{attrs:{\"title\":\"安全中心\",\"left-text\":\"返回\",\"left-arrow\":\"\"},on:{\"click-left\":function($event){return _vm.$router.go(-1)}}}),_c('div',{staticClass:\"content\"},[_c('van-cell-group',[_c('van-cell',{attrs:{\"title\":\"修改密码\",\"is-link\":\"\"},on:{\"click\":_vm.changePasswords}}),_c('van-cell',{attrs:{\"title\":\"注销账号\",\"is-link\":\"\"},on:{\"click\":_vm.destroy}})],1),_c('div',{staticClass:\"button\"},[_c('van-button',{attrs:{\"type\":\"danger\",\"round\":\"\"},on:{\"click\":_vm.logout}},[_vm._v(\"退出登录\")])],1)],1),_c('van-popup',{attrs:{\"position\":\"bottom\",\"round\":\"\"},model:{value:(_vm.show),callback:function ($$v) {_vm.show=$$v},expression:\"show\"}},[_c('div',{staticClass:\"passwords\"},[_c('van-form',[_c('van-field',{attrs:{\"label\":\"旧密码\",\"placeholder\":\"请输入密码\"},model:{value:(_vm.oldPassword),callback:function ($$v) {_vm.oldPassword=$$v},expression:\"oldPassword\"}}),_c('van-field',{attrs:{\"label\":\"新密码\",\"placeholder\":\"请输入密码\"},model:{value:(_vm.newPassword),callback:function ($$v) {_vm.newPassword=$$v},expression:\"newPassword\"}})],1),_c('div',{staticClass:\"btn-box\"},[_c('van-button',{attrs:{\"round\":\"\",\"block\":\"\",\"type\":\"info\",\"native-type\":\"submit\"},on:{\"click\":_vm.commit}},[_vm._v(\"提交\")])],1)],1)]),_c('van-popup',{attrs:{\"position\":\"bottom\",\"round\":\"\"},model:{value:(_vm.destroys),callback:function ($$v) {_vm.destroys=$$v},expression:\"destroys\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div>\r\n <van-nav-bar title=\"安全中心\" left-text=\"返回\" left-arrow @click-left=\"$router.go(-1)\" />\r\n        <div class=\"content\">\r\n         <van-cell-group>\r\n        <van-cell title=\"修改密码\" is-link @click=\"changePasswords\" />\r\n        <van-cell title=\"注销账号\" is-link @click=\"destroy\" />\r\n      </van-cell-group>   \r\n        <div class=\"button\">\r\n             <van-button type=\"danger\" round @click=\"logout\">退出登录</van-button>\r\n        </div>\r\n     \r\n        </div>\r\n  \r\n  <van-popup v-model=\"show\" position=\"bottom\" round >\r\n      <div class=\"passwords\">\r\n     <van-form >\r\n  <van-field v-model=\"oldPassword\" label=\"旧密码\" placeholder=\"请输入密码\" />\r\n  <van-field v-model=\"newPassword\" label=\"新密码\" placeholder=\"请输入密码\" />\r\n \r\n</van-form>\r\n\r\n<div class=\"btn-box\">\r\n            <van-button round block type=\"info\" native-type=\"submit\" @click=\"commit\">提交</van-button>\r\n          </div>\r\n </div>\r\n  </van-popup>\r\n\r\n   <van-popup v-model=\"destroys\" position=\"bottom\" round >\r\n       \r\n   </van-popup>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        data() {\r\n            return {\r\n                show:false,\r\n                destroys:false,\r\n                oldPassword:'',\r\n                newPassword:''\r\n            }\r\n        },\r\n        methods: {\r\n            changePasswords(){\r\n                this.show=true\r\n            },\r\n            destroy(){\r\n                this.destroys=true\r\n            },\r\n            commit(){\r\n                 let tokenString = localStorage.getItem(\"__jigng\")\r\n                 this.$toast.loading({\r\n        message: \"加载中...\",\r\n        forbidClick: true,\r\n        duration: 0\r\n      })\r\n      this.axios({\r\n          method:'post',\r\n          url:'/updatePassword',\r\n          data:{\r\n               appkey: this.appkey,\r\n          tokenString,\r\n          password: this.newPassword,\r\n          oldPassword: this.oldPassword\r\n          }\r\n      }).then(res=>{\r\n          this.$toast.clear()\r\n           this.show = false;\r\n           if (res.data.code == \"E001\") {\r\n            //清除token\r\n            localStorage.removeItem(\"__jigng\");\r\n            this.$router.push({ name: \"登录\" });\r\n          } else {\r\n            this.$toast(res.data.msg)\r\n          }\r\n          \r\n      }).catch(err=>{\r\n          \r\n      })\r\n            },\r\n    //退出登录\r\n    logout() {\r\n      localStorage.removeItem(\"__jigng\");\r\n      this.$router.push({ name: \"登录\" });\r\n    },\r\n\r\n    destroy() {\r\n      this.$dialog\r\n        .confirm({\r\n          title: \"注销账号\",\r\n          message: \"一旦注销，数据无法恢复\"\r\n        })\r\n        .then(() => {\r\n          let tokenString = localStorage.getItem(\"__jigng\");\r\n\r\n          this.$toast.loading({\r\n            message: \"加载中...\",\r\n            forbidClick: true,\r\n            duration: 0\r\n          });\r\n\r\n          this.axios({\r\n            method: \"POST\",\r\n            url: \"/destroyAccount\",\r\n            data: {\r\n              appkey: this.appkey,\r\n              tokenString\r\n            }\r\n          })\r\n            .then(res => {\r\n              this.$toast.clear();\r\n              \r\n                \r\n              if (res.data.code == 'G001') {\r\n                //清除token\r\n                localStorage.removeItem('__jigng');\r\n                this.$router.push({name: '登录'});\r\n              } else {\r\n                this.$toast(res.data.msg);\r\n                 this.$router.push({name: '登录'});\r\n              }\r\n            })\r\n            .catch(err => {\r\n              this.$toast.clear();\r\n              \r\n            });\r\n        })\r\n        .catch(err => {\r\n          \r\n        });\r\n    }\r\n        },\r\n    }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.content{\r\n    width: 80%;\r\n    margin:20px auto;\r\n   .van-cell{\r\n       height: 60px;\r\n      \r\n       border-radius: 20px;\r\n   }\r\n    .button{\r\n        width: 50%;\r\n        margin: 20px auto;\r\n    }\r\n    button{\r\n        width: 100%;\r\n    }\r\n    \r\n}\r\n/deep/ .van-button--block{\r\n        width: 65%;\r\n        margin: 0 auto;\r\n    }\r\n.passwords{\r\n    width: 80%;\r\n    margin: 0 auto;\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./safe.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./safe.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./safe.vue?vue&type=template&id=762f0e6e&scoped=true&\"\nimport script from \"./safe.vue?vue&type=script&lang=js&\"\nexport * from \"./safe.vue?vue&type=script&lang=js&\"\nimport style0 from \"./safe.vue?vue&type=style&index=0&id=762f0e6e&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"762f0e6e\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./safe.vue?vue&type=style&index=0&id=762f0e6e&lang=less&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./safe.vue?vue&type=style&index=0&id=762f0e6e&lang=less&scoped=true&\"","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}"],"sourceRoot":""}